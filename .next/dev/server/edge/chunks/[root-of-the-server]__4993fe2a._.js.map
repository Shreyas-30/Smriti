{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/Documents/Developer/smriti/src/lib/supabase/middleware.ts"],"sourcesContent":["import { NextResponse, type NextRequest } from \"next/server\";\nimport { createServerClient } from \"@supabase/ssr\";\n\nconst PROTECTED_PREFIXES = [\"/dashboard\", \"/elders\", \"/stories\", \"/projects\"];\n\nexport async function updateSession(request: NextRequest) {\n  let response = NextResponse.next({ request });\n\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return request.cookies.getAll();\n        },\n        setAll(cookiesToSet) {\n          cookiesToSet.forEach(({ name, value, options }: any) => {\n            response.cookies.set(name, value, options);\n          });\n        },\n      },\n    },\n  );\n\n  const { data } = await supabase.auth.getUser();\n\n  const pathname = request.nextUrl.pathname;\n  const isProtected = PROTECTED_PREFIXES.some((p) => pathname.startsWith(p));\n  const isAuthRoute =\n    pathname.startsWith(\"/login\") || pathname.startsWith(\"/signup\");\n\n  if (isProtected && !data.user) {\n    const url = request.nextUrl.clone();\n    url.pathname = \"/login\";\n    url.searchParams.set(\"next\", pathname);\n    return NextResponse.redirect(url);\n  }\n\n  if (isAuthRoute && data.user) {\n    const url = request.nextUrl.clone();\n    url.pathname = \"/dashboard\";\n    return NextResponse.redirect(url);\n  }\n\n  return response;\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,qBAAqB;IAAC;IAAc;IAAW;IAAY;CAAY;AAEtE,eAAe,cAAc,OAAoB;IACtD,IAAI,WAAW,oOAAY,CAAC,IAAI,CAAC;QAAE;IAAQ;IAE3C,MAAM,WAAW,IAAA,2OAAkB,oKAGjC;QACE,SAAS;YACP;gBACE,OAAO,QAAQ,OAAO,CAAC,MAAM;YAC/B;YACA,QAAO,YAAY;gBACjB,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAO;oBACjD,SAAS,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;gBACpC;YACF;QACF;IACF;IAGF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE5C,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IACzC,MAAM,cAAc,mBAAmB,IAAI,CAAC,CAAC,IAAM,SAAS,UAAU,CAAC;IACvE,MAAM,cACJ,SAAS,UAAU,CAAC,aAAa,SAAS,UAAU,CAAC;IAEvD,IAAI,eAAe,CAAC,KAAK,IAAI,EAAE;QAC7B,MAAM,MAAM,QAAQ,OAAO,CAAC,KAAK;QACjC,IAAI,QAAQ,GAAG;QACf,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ;QAC7B,OAAO,oOAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,IAAI,eAAe,KAAK,IAAI,EAAE;QAC5B,MAAM,MAAM,QAAQ,OAAO,CAAC,KAAK;QACjC,IAAI,QAAQ,GAAG;QACf,OAAO,oOAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO;AACT"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/Documents/Developer/smriti/middleware.ts"],"sourcesContent":["import { updateSession } from \"@/lib/supabase/middleware\";\nimport type { NextRequest } from \"next/server\";\n\nexport async function middleware(request: NextRequest) {\n  return updateSession(request);\n}\n\nexport const config = {\n  matcher: [\"/((?!_next/static|_next/image|favicon.ico).*)\"],\n};\n"],"names":[],"mappings":";;;;;;AAAA;;AAGO,eAAe,WAAW,OAAoB;IACnD,OAAO,IAAA,iMAAa,EAAC;AACvB;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAgD;AAC5D"}}]
}